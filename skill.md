# Vibe Project Manager

## 描述

Vibe Project Manager 是一个项目管理脚手架工具，用于创建和维护 vibe coding 项目的文档结构。它提供了完整的项目状态管理、任务管理和会话管理功能。

---

## 命令列表

### 基本命令

| 命令 | 描述 | 示例 |
|------|------|------|
| `init` | 初始化项目文档结构 | `/vibe init` |
| `status` | 读取当前项目状态 | `/vibe status` |
| `update-state` | 更新项目状态（追加内容） | `/vibe update-state "完成用户认证模块"` |
| `help` | 显示帮助信息 | `/vibe help` |

### 任务管理

| 命令 | 描述 | 示例 |
|------|------|------|
| `create-task` | 创建新任务 | `/vibe create-task "实现登录功能"` |
| `list-tasks` | 列出所有任务 | `/vibe list-tasks` |
| `update-task` | 更新任务内容 | `/vibe update-task 001 "新的任务描述"` |
| `complete-task` | 标记任务完成 | `/vibe complete-task 001` |

### 会话管理

| 命令 | 描述 | 示例 |
|------|------|------|
| `letsgo` | 启动工作流程 | `/vibe letsgo` |
| `welldone` | 结束工作流程 | `/vibe welldone` |
| `aftercrash` | 恢复崩溃会话 | `/vibe aftercrash` |

---

## 命令详解

### 1. init - 初始化项目

**功能**：在当前项目目录下创建 `.vibe/` 目录及所有必要的文档文件。

**执行步骤**：
1. 检查当前目录是否已是 vibe 项目（存在 `.vibe/` 目录）
2. 如果已存在，提示用户确认是否重新初始化
3. 创建目录结构
4. 创建所有模板文件

**创建的文件**：
- `.vibe/design.md` - 项目设计文档（空模板）
- `.vibe/state.md` - 项目状态（空模板）
- `.vibe/decisions.md` - 技术决策（空模板）
- `.vibe/letsgo.md` - 启动指令模板
- `.vibe/welldone.md` - 结束流程模板
- `.vibe/aftercrash.md` - 恢复流程模板
- `.vibe/task-std.md` - 任务标准格式模板
- `.vibe/tasks/` - 任务目录

---

### 2. status - 读取项目状态

**功能**：读取并显示 `.vibe/state.md` 的内容。

**执行步骤**：
1. 检查 `.vibe/state.md` 是否存在
2. 读取并显示文件内容
3. 如果文件不存在或为空，提示用户初始化

---

### 3. update-state - 更新项目状态

**功能**：在 `.vibe/state.md` 中追加新的状态信息。

**参数**：
- `content` - 要追加的内容（必需）

**执行步骤**：
1. 检查 `.vibe/state.md` 是否存在
2. 在文件末尾追加内容（带时间戳）
3. 格式：`[YYYY-MM-DD HH:MM:SS] content`

---

### 4. create-task - 创建新任务

**功能**：创建一个新的任务文件。

**参数**：
- `title` - 任务标题（必需）
- `description` - 任务描述（可选）

**执行步骤**：
1. 检查 `.vibe/tasks/` 目录是否存在
2. 读取现有任务编号，找到最大值
3. 创建新的任务文件（编号 +1）
4. 使用标准任务格式模板

**任务文件格式**：
```markdown
## 目标

[任务目标描述]

## 输入

- 已有文件或资源
- 前置结论或依赖
- 配置或环境要求

## 输出

必须产生的文件、修改或成果：
- 创建/修改的文件列表
- 需要达到的具体指标
- 可验证的结果

## 完成条件

什么样的状态算完成：
- 功能测试通过
- 代码审查通过
- 文档已更新
- 相关任务已关联
```

---

### 5. list-tasks - 列出所有任务

**功能**：列出所有任务文件及其状态。

**执行步骤**：
1. 读取 `.vibe/tasks/` 目录
2. 按任务编号排序
3. 显示任务标题和完成状态
4. 如果任务文件中包含 "## 完成条件" 部分已完成的内容，标记为已完成

---

### 6. update-task - 更新任务

**功能**：更新指定任务的内容。

**参数**：
- `task_id` - 任务编号（必需）
- `content` - 新的内容（必需）

**执行步骤**：
1. 检查任务文件是否存在
2. 更新任务内容
3. 保留原有格式和结构

---

### 7. complete-task - 标记任务完成

**功能**：标记指定任务为已完成。

**参数**：
- `task_id` - 任务编号（必需）

**执行步骤**：
1. 检查任务文件是否存在
2. 在任务文件中添加完成标记
3. 在 "## 完成条件" 部分添加完成时间戳

---

### 8. letsgo - 启动工作流程

**功能**：按照 `letsgo.md` 的指令启动工作。

**执行步骤**：
1. 读取 `.vibe/letsgo.md`
2. 按照指令执行：
   - 阅读 `.vibe/design.md`
   - 阅读 `.vibe/state.md`
   - 阅读 `.vibe/decisions.md`
3. 用不超过 10 行复述当前任务状态
4. 列出 3 个推荐行动

---

### 9. welldone - 结束工作流程

**功能**：按照 `welldone.md` 的指令结束工作。

**执行步骤**：
1. 读取 `.vibe/welldone.md`
2. 按照指令执行：
   - 更新 `.vibe/state.md`
   - 标记已完成内容
   - 记录当前假设
   - 列出未解决问题

---

### 10. aftercrash - 恢复崩溃会话

**功能**：按照 `aftercrash.md` 的指令恢复会话。

**执行步骤**：
1. 读取 `.vibe/aftercrash.md`
2. 按照指令执行：
   - 阅读 `.vibe/state.md`
   - 确认理解当前进度
   - 说明如何继续

---

## 项目结构

初始化后的项目结构：

```
project-root/
├── .vibe/
│   ├── design.md          # 北极星 - 稳定架构和设计约束
│   ├── state.md           # 进度/断点 - 频繁更新的工作状态
│   ├── decisions.md       # 关键结论 - 不可逆的技术决策
│   ├── letsgo.md          # 启动指令
│   ├── welldone.md        # 结束流程
│   ├── aftercrash.md      # 恢复流程
│   ├── task-std.md        # 任务标准格式模板
│   └── tasks/             # 任务目录
│       ├── task-001.md
│       ├── task-002.md
│       └── ...
└── ...                    # 项目其他文件
```

---

## 文件职责

| 文件 | Agent 可修改 | 用途 |
|------|------------|------|
| design.md | ❌ | 北极星 - 稳定架构和设计约束 |
| state.md | ✅ | 进度/断点 - 频繁更新的工作状态 |
| decisions.md | ⚠️ | 关键结论 - 不可逆的技术决策（仅添加新决策） |
| tasks/task-xxx.md | ✅ | 可执行任务 - 具体的开发任务 |
| letsgo.md | ✅ | 启动指令 - 工作开始时的操作流程 |
| welldone.md | ✅ | 结束流程 - 工作结束时的操作流程 |
| aftercrash.md | ✅ | 恢复流程 - 会话崩溃后的恢复操作 |

---

## 重要原则

### 北极星原则
- `design.md` 是项目的北极星
- ❌ Agent 不可修改
- 所有开发工作必须遵循此设计

### 断点原则
- `state.md` 是工作断点
- ✅ 每次结束工作必须更新
- 真实状态只存在于本地文件

### 标准原则
- 所有 `task-xxx.md` 必须遵循 4 段式格式
- 目标、输入、输出、完成条件缺一不可

### 可恢复原则
- `aftercrash.md` 确保会话崩溃后快速恢复
- 所有状态记录在 `state.md`

---

## 使用示例

### 初始化新项目

```bash
cd /path/to/your/project
/vibe init
```

### 创建第一个任务

```bash
/vibe create-task "初始化项目基础结构"
```

### 开始工作

```bash
/vibe letsgo
```

### 更新状态

```bash
/vibe update-state "完成项目目录结构的创建"
```

### 结束工作

```bash
/vibe welldone
```

---

## 注意事项

1. **首次使用**：必须在项目根目录执行 `/vibe init` 来初始化
2. **状态更新**：每次结束工作前执行 `/vibe welldone` 来更新状态
3. **任务编号**：任务编号自动递增，不需要手动指定
4. **文档格式**：严格遵循模板格式，确保一致性
5. **权限控制**：`design.md` 是不可修改的北极星文档

---

## 故障排查

### 问题：找不到 .vibe 目录

**原因**：项目未初始化

**解决方案**：
```bash
/vibe init
```

### 问题：state.md 为空

**原因**：从未更新过状态

**解决方案**：
```bash
/vibe update-state "开始项目开发"
```

### 问题：任务创建失败

**原因**：`.vibe/tasks/` 目录不存在或权限不足

**解决方案**：
```bash
# 检查目录是否存在
ls -la .vibe/tasks/
# 如果不存在，重新初始化
/vibe init
```

---

## 版本历史

- v1.0.0 - 初始版本
